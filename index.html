<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <title>GifCaller</title>
</head>
<body>
  <button data-gif="cat">cat</button>
  <button data-gif="dog">dog</button>
  <button data-gif="bird">bird</button>
  <div id="gifs-appear-here">
  </div>
</body>
<script>

$("button").on("click", function() {

  var gif = $(this).attr("data-gif");

  var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
    gif + "&api_key=IHI7Q6cGUw9ZBSKeYTQQCTy0ZiAeNmmC&limit=10";

  $.ajax({
    url: queryURL,
    method: "GET"
  })
    .then(function(response) {
      // console.log(queryURL);

      // console.log(response);
      var results = response.data;

      for (var i = 0; i < results.length; i++) {

        var gifDiv = $("<div>");

        var p = $("<p>").text("Rating: " + results[i].rating);

        var gifImage = $("<img>");
        gifImage.attr("class","gif")
        gifImage.attr("src", results[i].images.fixed_height_still.url);
        gifImage.attr("data-state","still")

        gifDiv.append(gifImage);
        gifDiv.append(p);
        
        $("#gifs-appear-here").prepend(gifDiv);
      }
    });
});

$('body').on('click', '.gif', function() {
  var src = $(this).attr("src");
  if($(this).hasClass('playing')){
    $(this).attr('src', src.replace(/\.gif/i, "_s.gif"))
    $(this).removeClass('playing');
  } else {
    $(this).addClass('playing');
    $(this).attr('src', src.replace(/\_s.gif/i, ".gif"))
  }
});

</script>
</html>